var ctrl = require("mcp_control");
var config = require("mcp_config");
var adminCtl = ctrl.adminCtl;
var loanCtl = ctrl.loanCtl;
var commonCtl = ctrl.commonCtl;
var investCtl=ctrl.investCtl;
var accountCtl=ctrl.accountCtl;
var userCtl=ctrl.userCtl;
var creditorCtl=ctrl.creditorCtl;
var ec = config.ec;
var indexCtl=ctrl.indexCtl;
var marketCtl = ctrl.marketCtl;

var CmdFactory = function () {
};

CmdFactory.prototype.handle = function (headNode, bodyStr, cb) {
    var cmdGroup = headNode.cmd.match(/^([A-Z]+)([0-9]{1,})$/);
    if (cmdGroup[1] == "AD") {
        adminCtl.handle(headNode, bodyStr, cb);
    } else if (cmdGroup[1] == "LC") {
        loanCtl.handle(headNode, bodyStr, cb);
    } else if (cmdGroup[1] == "CM") {
        commonCtl.handle(headNode, bodyStr, cb);
    } else if (cmdGroup[1] == "IC") {
        investCtl.handle(headNode, bodyStr, cb);
    } else if (cmdGroup[1] == "AC") {
        accountCtl.handle(headNode, bodyStr, cb);
    } else if (cmdGroup[1] == "UC") {
        userCtl.handle(headNode, bodyStr, cb);
    } else if (cmdGroup[1] == "CR") {
        creditorCtl.handle(headNode, bodyStr, cb)
    } else if (cmdGroup[1] == "IDC") {
        indexCtl.handle(headNode,bodyStr,cb);
    } else if (cmdGroup[1] == "MC") {
        marketCtl.handle(headNode,bodyStr,cb);
    }else {
        cb(ec.E2010);
    }
};

var cmdFactory = new CmdFactory();
module.exports = cmdFactory;